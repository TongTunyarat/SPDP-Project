<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>

    <!-- CSS -->
    <link rel="stylesheet" href="/css/sidebar-admin.css">
    <link rel="stylesheet" href="/css/ScorePeriodSetting.css">
    <link rel="stylesheet" href="/css/Dashboard-Admin.css">

    <!-- Calendar -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

    <!-- Library -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">


</head>
<body>
<div class="container">
    <div class="sidebar">
        <h2>ICT MAHIDOL</h2>
        <ul>
            <h4><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 48 48" style="fill:#FFFFFF;">
                <path
                        d="M39.5,43h-9c-1.381,0-2.5-1.119-2.5-2.5v-9c0-1.105-0.895-2-2-2h-4c-1.105,0-2,0.895-2,2v9c0,1.381-1.119,2.5-2.5,2.5h-9	C7.119,43,6,41.881,6,40.5V21.413c0-2.299,1.054-4.471,2.859-5.893L23.071,4.321c0.545-0.428,1.313-0.428,1.857,0L39.142,15.52	C40.947,16.942,42,19.113,42,21.411V40.5C42,41.881,40.881,43,39.5,43z">
                </path>
            </svg> Homepage </h4>
            <li><a href="/admin-dashboard" class="active">Dashboard</a></li>
            <li><a href="/admin-proposal-report">Proposal Grade Report</a></li>
            <li><a href="/admin-defense-report">Defense Grade Report</a></li>
            <li><a href="/admin-eva-traking">Evaluation Tracking</a></li>
        </ul>

        <h2> Pages </h2>

        <ul>
            <h4><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0,0,256,256">
                <g fill="#ffffff" fill-rule="nonzero">
                    <g transform="scale(5.33333,5.33333)">
                        <path
                                d="M12.5,4c-2.481,0 -4.5,2.019 -4.5,4.5v31c0,2.481 2.019,4.5 4.5,4.5h23c2.481,0 4.5,-2.019 4.5,-4.5v-19.5h-11.5c-2.481,0 -4.5,-2.019 -4.5,-4.5v-11.5zM27,4.87891v10.62109c0,0.827 0.673,1.5 1.5,1.5h10.62109zM17.5,25h13c0.828,0 1.5,0.672 1.5,1.5c0,0.828 -0.672,1.5 -1.5,1.5h-13c-0.828,0 -1.5,-0.672 -1.5,-1.5c0,-0.828 0.672,-1.5 1.5,-1.5zM17.49023,32h8.99609c0.828,0 1.5,0.671 1.5,1.5c0.001,0.759 -0.56292,1.38733 -1.29492,1.48633l-0.20312,0.01367h-8.99609c-0.828,0 -1.5,-0.672 -1.5,-1.5c0,-0.759 0.56292,-1.38733 1.29492,-1.48633z">
                        </path>
                    </g>
                </g>
            </svg>Score Evaluation </h4>
            <li><a href="#">Scoring Period Settings</a></li>
        </ul>

        <ul>
            <h4><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 48 48" style="fill:#FFFFFF;">
                <path
                        d="M42 15v-2.5C42 8.916 39.084 6 35.5 6h-23C8.916 6 6 8.916 6 12.5V15H42zM25.5 27H32V33H25.5zM35 27H42V33H35zM6 27H13V33H6zM16 27H22.5V33H16zM35 18H42V24H35zM25.5 18H32V24H25.5zM25.5 36H32V42H25.5zM16 36H22.5V42H16zM35 36v6h.5c3.415 0 6.218-2.649 6.475-6H35zM6.025 36c.257 3.351 3.059 6 6.475 6H13v-6H6.025zM16 18H22.5V24H16zM6 18H13V24H6z">
                </path>
            </svg> Manage Schedule </h4>
            <li><a href="/admin/proposalSchedule">Proposal Schedule</a></li>
            <li><a href="/admin/editProposalSchedulePage">Edit Proposal Timing</a></li>
            <li><a href="/admin/defenseSchedule">Defense Schedule</a></li>
            <li><a href="#">Edit Defense Timing</a></li>
        </ul>

        <ul>
            <h4><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 48 48" style="fill:#FFFFFF;">
                <path
                        d="M35.5,8h-3.551C31.697,5.756,29.81,4,27.5,4h-7c-2.31,0-4.197,1.756-4.449,4H12.5C10.019,8,8,10.019,8,12.5v27	c0,2.481,2.019,4.5,4.5,4.5h23c2.481,0,4.5-2.019,4.5-4.5v-27C40,10.019,37.981,8,35.5,8z M20.5,7h7C28.327,7,29,7.673,29,8.5	S28.327,10,27.5,10h-7C19.673,10,19,9.327,19,8.5S19.673,7,20.5,7z M22.5,34h-8c-0.828,0-1.5-0.671-1.5-1.5s0.672-1.5,1.5-1.5h8	c0.828,0,1.5,0.671,1.5,1.5S23.328,34,22.5,34z M22.5,24h-8c-0.828,0-1.5-0.671-1.5-1.5s0.672-1.5,1.5-1.5h8	c0.828,0,1.5,0.671,1.5,1.5S23.328,24,22.5,24z M34.561,34.439c0.586,0.585,0.586,1.536,0,2.121C34.268,36.854,33.884,37,33.5,37	s-0.768-0.146-1.061-0.439L31,35.121l-1.439,1.439C29.268,36.854,28.884,37,28.5,37s-0.768-0.146-1.061-0.439	c-0.586-0.585-0.586-1.536,0-2.121L28.879,33l-1.439-1.439c-0.586-0.585-0.586-1.536,0-2.121c0.586-0.586,1.535-0.586,2.121,0	L31,30.879l1.439-1.439c0.586-0.586,1.535-0.586,2.121,0c0.586,0.585,0.586,1.536,0,2.121L33.121,33L34.561,34.439z M34.561,21.561	l-4,4C30.268,25.854,29.884,26,29.5,26s-0.768-0.146-1.061-0.439l-2-2c-0.586-0.585-0.586-1.536,0-2.121	c0.586-0.586,1.535-0.586,2.121,0l0.939,0.939l2.939-2.939c0.586-0.586,1.535-0.586,2.121,0	C35.146,20.025,35.146,20.975,34.561,21.561z">
                </path>
            </svg> Manage Project </h4>
            <li><a href="#">Project Overview</a></li>
            <li><a href="#">Project Details</a></li>
            <li><a href="#">Committee</a></li>
            <li><a href="#">Poster Committee</a></li>
        </ul>
    </div>

    <div class="content">
        <!--    HEADER    -->
        <div class="header-section">
            <span id="date-time"></span>

            <div class="semester-container">
                <select id="semester-selector" onchange="fetchGradingStatistics(); fetchProposalData(); fetchDefenseData(); fetchPosterData(); fetchGradeDistribution(); fetchEvaluationStatus(); fetchTeacherScoringData();"></select>
            </div>
        </div>

        <!--    TAB: ICT & DST    -->
        <div class="tabs">
            <div class="tab active">All</div>
            <div class="tab">ICT</div>
            <div class="tab">DST</div>
        </div>

        <!-- Card Header -->
        <div class="card-wrapper">
            <div class="header-container">
                <label class="text-header"> Proposal Grading </label>

                <label class="text-center">
                    <h1> 0/0 <span style="color: #919EAB;"></span></h1>
                </label>

                <label class="text-footer"> 0 <span style="color: #919EAB;"> completed </span> </label>
            </div>

            <div class="header-container">
                <label class="text-header"> Defense Grading </label>
                <label class="text-center">
                    <h1> 0/0 <span style="color: #919EAB;"></span></h1>
                </label>
                <label class="text-footer"> 0 <span style="color: #919EAB;"> completed </span> </label>
            </div>

            <div class="header-container">
                <label class="text-header"> Proposal Evaluation </label>
                <label class="text-center">
                    <h1> 0/0 <span style="color: #919EAB;">Groups</span></h1>
                </label>

                <label class="text-footer"> 0 <span style="color: #919EAB;"> completed </span> </label>
            </div>

            <div class="header-container">
                <label class="text-header"> Poster Evaluation </label>
                <label class="text-center">
                    <h1> 0/0 <span style="color: #919EAB;">Groups</span></h1>
                </label>

                <label class="text-footer"> 0 <span style="color: #919EAB;"> completed </span> </label>
            </div>

            <div class="header-container">
                <label class="text-header"> Defense Evaluation </label>
                <label class="text-center">
                    <h1> 0/0 <span style="color: #919EAB;">Groups</span></h1>
                </label>

                <label class="text-footer"> 0 <span style="color: #919EAB;"> completed </span> </label>
            </div>
        </div>

        <!--    TAB: Proposal & Poster &  Defense   -->
        <div class="filters">
            <div class="filter active">Proposal</div>
            <div class="filter">Poster</div>
            <div class="filter">Defense</div>
        </div>

        <!--    Content    -->
        <div class="main-content">
            <div class="panel">
                <div class="panel-title">‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡πÄ‡∏Å‡∏£‡∏î‡∏Ç‡∏≠‡∏á‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>
                <div class="chart-container">
                    <div class="bar-chart" id="barChart">
                        <!-- ‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏£‡∏≤‡∏ü -->
                    </div>
                    <div class="x-axis">
                        <div class="x-label">A</div>
                        <div class="x-label">B+</div>
                        <div class="x-label">B</div>
                        <div class="x-label">C+</div>
                        <div class="x-label">C</div>
                        <div class="x-label">D+</div>
                        <div class="x-label">D</div>
                        <div class="x-label">F</div>
                        <div class="x-label">I</div>
                    </div>
                </div>
                <div class="tooltip" id="tooltip"></div> <!-- ‡πÄ‡∏û‡∏¥‡πà‡∏° tooltip -->
                <div style="font-size: 13px; text-align: center; margin-top: 10px; color: #666;">
                    ‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡∏£‡∏î‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏£‡∏∞‡∏î‡∏±‡∏ö ‡∏Ñ‡∏¥‡∏î‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå‡∏Ç‡∏≠‡∏á‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                </div>
            </div>

            <div class="panel">
                <div class="panel-title">‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç</div>
                <div class="timeline">
                    <div class="timeline-item">
                        <div class="timeline-icon">üïí</div>
                        <div class="timeline-content">
                            <div class="timeline-title">Proposal Presentation</div>
                            <div class="timeline-date">‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤ : 2025/01/15 - 2025/01/15</div>
                            <div class="timeline-status">‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏ß‡∏•‡∏≤ : 0 ‡∏ß‡∏±‡∏ô</div>
                        </div>
                    </div>

                    <div class="timeline-item">
                        <div class="timeline-icon">üïí</div>
                        <div class="timeline-content">
                            <div class="timeline-title">Poster Exhibition</div>
                            <div class="timeline-date">‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤ : 2025/01/15 - 2025/01/15</div>
                            <div class="timeline-status">‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏ß‡∏•‡∏≤ : 1 ‡∏ß‡∏±‡∏ô</div>
                        </div>
                    </div>

                    <div class="timeline-item">
                        <div class="timeline-icon">üïí</div>
                        <div class="timeline-content">
                            <div class="timeline-title">Senior Project Defense</div>
                            <div class="timeline-date">‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤ : 2025/01/15 - 2025/01/15</div>
                            <div class="timeline-status">‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏ß‡∏•‡∏≤ : 60 ‡∏ß‡∏±‡∏ô</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="panel">
                <div class="panel-title">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</div>
                <div class="panel-chart-legend" style="display: flex;">
                    <div class="pie-chart">
                        <div class="percentage green" id="completed"></div>
                        <div class="percentage yellow" id="partial"></div>
                        <div class="percentage red" id="notEvaluated"></div>
                    </div>
                    <div class="legend" style="margin-left: 20px;">
                        <div class="legend-item">
                            <div class="legend-color green"></div>
                            <div>‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Ñ‡∏£‡∏ö‡πÅ‡∏•‡πâ‡∏ß</div>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color yellow"></div>
                            <div>‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏ö‡∏≤‡∏á‡∏™‡πà‡∏ß‡∏ô</div>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color red"></div>
                            <div>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="panel">
                <div class="panel-title">‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏•‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</div>
                <div class="horizontal-bar-chart" id="teacher-scoring-container">
                    <!-- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà‡πÇ‡∏î‡∏¢ JavaScript -->
                </div>
            </div>

<!--            <div class="panel">-->
<!--                <div class="panel-title">‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏•‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</div>-->
<!--                <div class="horizontal-bar-chart">-->
<!--                    <div class="h-bar-item">-->
<!--                        <div class="h-bar-label">Aj.Siripen</div>-->
<!--                        <div class="h-bar-container">-->
<!--                            <div class="h-bar-fill" style="width: 85%;"></div>-->
<!--                        </div>-->
<!--                        <div class="h-bar-percentage">15 ‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠</div>-->
<!--                    </div>-->
<!--                    <div class="h-bar-item">-->
<!--                        <div class="h-bar-label">Aj.Jidapa</div>-->
<!--                        <div class="h-bar-container">-->
<!--                            <div class="h-bar-fill" style="width: 70%;"></div>-->
<!--                        </div>-->
<!--                        <div class="h-bar-percentage">10 ‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠</div>-->
<!--                    </div>-->
<!--                    <div class="h-bar-item">-->
<!--                        <div class="h-bar-label">Aj.Siripen</div>-->
<!--                        <div class="h-bar-container">-->
<!--                            <div class="h-bar-fill" style="width: 65%;"></div>-->
<!--                        </div>-->
<!--                        <div class="h-bar-percentage">8 ‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠</div>-->
<!--                    </div>-->
<!--                    <div class="h-bar-item">-->
<!--                        <div class="h-bar-label">Aj.Siripen</div>-->
<!--                        <div class="h-bar-container">-->
<!--                            <div class="h-bar-fill" style="width: 60%;"></div>-->
<!--                        </div>-->
<!--                        <div class="h-bar-percentage">7 ‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠</div>-->
<!--                    </div>-->
<!--                    <div class="h-bar-item">-->
<!--                        <div class="h-bar-label">Aj.Siripen</div>-->
<!--                        <div class="h-bar-container">-->
<!--                            <div class="h-bar-fill" style="width: 40%;"></div>-->
<!--                        </div>-->
<!--                        <div class="h-bar-percentage">5 ‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠</div>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
        </div>
    </div>

</div>

<!-- ----------- Set Header Value -------------- -->
<script>
    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ô‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£
    function formatDate() {
        const date = new Date();
        const options = { weekday: 'long', day: '2-digit', month: 'long', year: 'numeric' };
        const formattedDate = date.toLocaleDateString('en-US', options);

        // ‡πÅ‡∏¢‡∏Å‡∏Ñ‡πà‡∏≤‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà
        const [weekday, month, day, year] = formattedDate.replace(',', '').split(' ');

        // ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà "Monday 03, March 2025"
        return `${weekday} ${day} ${month} ${year}`;
    }

    document.getElementById("date-time").textContent = formatDate();

    // ‡∏î‡∏∂‡∏á‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏≤‡∏Å Dropdown (‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏õ‡∏ó‡∏≥‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏≠‡∏∑‡πà‡∏ô‡πÑ‡∏î‡πâ)
    const semesterSelect = document.getElementById("semester-selector");
    semesterSelect.addEventListener("change", function () {
        console.log("Selected Semester:", semesterSelect.value);
    });

    // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ event listeners
    document.addEventListener("DOMContentLoaded", function () {
        // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å
        // fetchGradeDistribution();

        // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï event listener ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö semester selector
        const semesterSelect = document.getElementById("semester-selector");
        semesterSelect.addEventListener("change", function () {
            console.log("Selected Semester:", semesterSelect.value);
            fetchGradeDistribution();
            fetchEvaluationStatus();
            fetchTeacherScoringData();
        });

        // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï event listener ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö tabs (All, ICT, DST)
        const tabs = document.querySelectorAll(".tab");
        tabs.forEach(tab => {
            tab.addEventListener("click", function () {
                // ‡πÄ‡∏≠‡∏≤ active ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏ó‡∏∏‡∏Å tab
                tabs.forEach(t => t.classList.remove("active"));
                // ‡πÄ‡∏û‡∏¥‡πà‡∏° active ‡πÉ‡∏´‡πâ tab ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏Ñ‡∏•‡∏¥‡∏Å
                this.classList.add("active");
                // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å API ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô tab
                fetchGradeDistribution();
                fetchEvaluationStatus();
                fetchTeacherScoringData();
            });
        });

        // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï event listener ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö filters (Proposal, Poster, Defense)
        const filters = document.querySelectorAll(".filter");
        filters.forEach(filter => {
            filter.addEventListener("click", function () {
                // ‡πÄ‡∏≠‡∏≤ active ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏ó‡∏∏‡∏Å filter
                filters.forEach(f => f.classList.remove("active"));
                // ‡πÄ‡∏û‡∏¥‡πà‡∏° active ‡πÉ‡∏´‡πâ filter ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏Ñ‡∏•‡∏¥‡∏Å
                this.classList.add("active");
                // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å API ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô filter
                fetchGradeDistribution();
                fetchEvaluationStatus();
                fetchTeacherScoringData();
            });
        });
    });
</script>

<!-- --------- Semester Change ------------- -->
<script>
    async function fetchAcademicYears() {
        try {
            const response = await fetch('/api/academic-years'); // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å API
            const data = await response.json();

            console.log("Year: ", data);

            const semesterSelector = document.getElementById('semester-selector');
            semesterSelector.innerHTML = ""; // ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏Ñ‡πà‡∏≤‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏ï‡∏¥‡∏°‡πÉ‡∏´‡∏°‡πà

            data.forEach(year => {
                const option = document.createElement("option");
                option.value = year;
                option.textContent = "üìÜ "+year;
                semesterSelector.appendChild(option);
            });

            // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏õ‡∏µ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡πÄ‡∏õ‡πá‡∏ô default (‡πÄ‡∏ä‡πà‡∏ô 2025)
            const currentYear = new Date().getFullYear();  // ‡∏´‡∏≤‡∏õ‡∏µ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
            if (!semesterSelector.value) {
                semesterSelector.value = currentYear.toString();  // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡πà‡∏≤ default ‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏µ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
            }

            // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å fetchGradingStatistics ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡πà‡∏á‡∏Ñ‡πà‡∏≤ initial ‡∏õ‡∏µ‡πÑ‡∏õ
            await fetchGradingStatistics();
            await fetchProposalData();
            await fetchDefenseData();
            await fetchPosterData();
            await fetchGradeDistribution();
            await fetchEvaluationStatus();
            await fetchTeacherScoringData();

        } catch (error) {
            console.error("Error fetching academic years:", error);
        }
    }

    fetchAcademicYears();
</script>

<!-- ------------- For Grading Card --------------- -->
<script>
    let gradingData = [];  // ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤
    let gradingSummary = {}; // ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏£‡∏∏‡∏õ (completedProposals, completedDefenses, totalGroups, defenseEva, proposalEva)

    document.addEventListener('DOMContentLoaded', function() {
        // fetchGradingStatistics();

        const tabs = document.querySelectorAll(".tab");
        tabs.forEach(tab => {
            tab.addEventListener("click", function () {
                tabs.forEach(t => t.classList.remove("active"));
                this.classList.add("active");

                const selectedProgram = this.textContent.trim(); // ‡πÑ‡∏î‡πâ‡∏Ñ‡πà‡∏≤ "All", "ICT", ‡∏´‡∏£‡∏∑‡∏≠ "DST"
                updateGradingByProgram(selectedProgram);
            });
        });
    });

    async function fetchGradingStatistics() {
        const selectedYear = document.getElementById("semester-selector").value;  // ‡∏î‡∏∂‡∏á‡∏õ‡∏µ‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏≤‡∏Å dropdown
        console.log("selectedYear: ", selectedYear);  // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÑ‡∏î‡πâ‡∏Ñ‡πà‡∏≤‡πÑ‡∏´‡∏°‡πÉ‡∏ô console
        if (!selectedYear) {
            console.log("No year selected");
            return;
        }

        try {
            const response = await fetch(`/api/grading-statistics?year=${selectedYear}`);  // ‡∏™‡πà‡∏á‡∏õ‡∏µ‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏õ‡πÉ‡∏ô query parameter
            const data = await response.json();

            console.log("üìå Data from API:", data);

            if (!Array.isArray(data.student)) {
                console.error("‚ùå API response 'student' is not an array!", data);
                return;
            }

            gradingData = data.student;  // ‡πÉ‡∏ä‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• student ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
            gradingSummary = {
                totalGroups: data.totalGroups,
                completedProposals: data.completedProposals,
                completedDefenses: data.completedDefenses,
                proposalEvaluation: data.proposalEvaluation,  // ‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠
                defenseEvaluation: data.defenseEvaluation   // ‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô
            };

            // ‡∏Å‡∏£‡∏≠‡∏á‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà "I"
            const validStudentGrades = gradingData.filter(student => {
                const validProposal = gradingSummary.proposalEvaluation.some(evaluation => {
                    if (evaluation.student && evaluation.student.studentId === student.studentId) {
                        console.log(`Proposal Grade for ${student.studentId}: ${evaluation.gradeResult}`);
                        return evaluation.gradeResult !== "I";
                    }
                    return false;
                });

                const validDefense = gradingSummary.defenseEvaluation.some(evaluation => {
                    if (evaluation.student && evaluation.student.studentId === student.studentId) {
                        console.log(`Defense Grade for ${student.studentId}: ${evaluation.gradeResult}`);
                        return evaluation.gradeResult !== "I";
                    }
                    return false;
                });

                return validProposal || validDefense; // ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà "I"
            });

            console.log("üìä Valid Students Count:", validStudentGrades.length);

            gradingSummary.validStudents = validStudentGrades.length;  // ‡πÄ‡∏Å‡πá‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô student ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á

            updateGradingByProgram("All");
        } catch (error) {
            console.error('‚ùå Fetch error:', error);
        }
    }


    function updateGradingByProgram(program) {
        console.log("üìå Data before filter:", gradingData);

        if (!Array.isArray(gradingData)) {
            console.error("‚ùå gradingData is not an array!", gradingData);
            return;
        }

        let filteredData = gradingData;
        if (program !== "All") {
            // Filter data by program
            filteredData = gradingData.filter(item => item.program === program);
        }

        // Use proposalEvaluation and defenseEvaluation from gradingSummary
        const proposalEvaluation = gradingSummary.proposalEvaluation || [];
        const defenseEvaluation = gradingSummary.defenseEvaluation || [];

        // Calculate number of students with valid grades from both evaluations
        const successfulStudents = filteredData.filter(item => {
            const hasValidProposalGrade = proposalEvaluation.some(proposal => proposal.student.studentId === item.studentId && proposal.gradeResult !== "I");
            const hasValidDefenseGrade = defenseEvaluation.some(defense => defense.studentId.studentId === item.studentId && defense.gradeResult !== "I");

            return hasValidProposalGrade || hasValidDefenseGrade;  // If either evaluation has a valid grade
        });

        const successfulCount = successfulStudents.length;
        const totalCount = filteredData.length;  // Total count after filtering by program

        console.log(`üìä ${program} - ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à: ${successfulCount}/${totalCount}`);
        updateGradingCards(successfulCount, totalCount, program); // Update the card with successful count
    }


    function updateGradingCards(successfulCount, totalCount, program) {
        console.log("üéûÔ∏è ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à: " + successfulCount);

        // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÅ‡∏•‡∏∞‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πå‡∏î
        const proposalCard = document.querySelector('.card-wrapper .header-container:nth-child(1)');
        if (proposalCard) {
            const headingEl = proposalCard.querySelector('.text-center h1');
            const footerEl = proposalCard.querySelector('.text-footer');

            if (headingEl) {
                headingEl.innerHTML = `${successfulCount}/${totalCount} <span style="color: #919EAB;"> Students </span>`;
            }
            if (footerEl) {
                footerEl.innerHTML = `${successfulCount} <span style="color: #919EAB;"> completed </span>`;
            }
        }

        const defenseCard = document.querySelector('.card-wrapper .header-container:nth-child(2)');
        if (defenseCard) {
            const headingEl = defenseCard.querySelector('.text-center h1');
            const footerEl = defenseCard.querySelector('.text-footer');

            if (headingEl) {
                headingEl.innerHTML = `${successfulCount}/${totalCount} <span style="color: #919EAB;"> Students </span>`;
            }
            if (footerEl) {
                footerEl.innerHTML = `${successfulCount} <span style="color: #919EAB;"> completed </span>`;
            }
        }
    }
</script>

<!-- ------------- For Proposal Evaluation Card --------------- -->
<script>
    async function fetchProposalData() {
        const program = document.querySelector(".tab.active");
        console.log("Program: "+ program.textContent)

        const selectedYear = document.getElementById("semester-selector").value;  // ‡∏î‡∏∂‡∏á‡∏õ‡∏µ‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏≤‡∏Å dropdown

        if (!selectedYear) {
            console.error("Year is not selected!");
            return;
        }

        try {
            const response = await fetch(`http://localhost:8080/api/proposal-evaluation?program=${program.textContent}&year=${selectedYear}`);

            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }

            const data = await response.json();
            console.log("Fetch Proposal Data:", data);

            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö
            if (!data || typeof data.totalProjects === "undefined" || typeof data.completedProjects === "undefined") {
                throw new Error("Invalid data format");
            }

            // ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ .header-container ‡∏ó‡∏µ‡πà‡∏°‡∏µ .text-header ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° 'Proposal Evaluation'
            const headerContainers = document.querySelectorAll(".header-container");
            headerContainers.forEach(container => {
                const headerText = container.querySelector(".text-header");
                if (headerText && headerText.textContent.includes("Proposal Evaluation")) {
                    const proposalHeader = container.querySelector(".text-center h1");
                    const proposalFooter = container.querySelector(".text-footer");

                    if (proposalHeader) {
                        proposalHeader.innerHTML = `${data.completedProjects}/${data.totalProjects} <span style="color: #919EAB;">Groups</span>`;
                    }

                    if (proposalFooter) {
                        proposalFooter.innerHTML = `${data.completedProjects} <span style="color: #919EAB;">completed</span>`;
                    }
                }
            });

        } catch (error) {
            console.error("Error fetching proposal data:", error);
        }
    }

    // Event listener ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà tab
    document.querySelectorAll('.tab').forEach(tab => {
        tab.addEventListener('click', function () {
            // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡πà‡∏≤‡πÉ‡∏´‡πâ‡∏Å‡∏±‡∏ö program ‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
            const program = tab.textContent.trim();
            // ‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡∏•‡∏≤‡∏™ active ‡πÉ‡∏´‡πâ‡∏Å‡∏±‡∏ö tab
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            tab.classList.add('active');

            // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô fetchProposalData ‡πÇ‡∏î‡∏¢‡∏™‡πà‡∏á‡∏Ñ‡πà‡∏≤ program ‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏õ
            fetchProposalData();
            fetchDefenseData();
            fetchPosterData();
        });
    });
</script>

<!-- ------------- For Defense Evaluation Card --------------- -->
<script>
    async function fetchDefenseData() {
        const program = document.querySelector(".tab.active");
        const selectedYear = document.getElementById("semester-selector").value;

        try {
            const response = await fetch(`http://localhost:8080/api/defense-evaluation?program=${program.textContent}&year=${selectedYear}`);

            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }

            const data = await response.json();
            console.log("Fetch Defense Data:", data);

            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö
            if (!data || typeof data.totalProjects === "undefined" || typeof data.completedProjects === "undefined") {
                throw new Error("Invalid data format");
            }

            // ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ .header-container ‡∏ó‡∏µ‡πà‡∏°‡∏µ .text-header ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° 'Proposal Evaluation'
            const headerContainers = document.querySelectorAll(".header-container");
            headerContainers.forEach(container => {
                const headerText = container.querySelector(".text-header");
                if (headerText && headerText.textContent.includes("Defense Evaluation")) {
                    const defenseHeader = container.querySelector(".text-center h1");
                    const defenseFooter = container.querySelector(".text-footer");

                    if (defenseHeader) {
                        defenseHeader.innerHTML = `${data.completedProjects}/${data.totalProjects} <span style="color: #919EAB;">Groups</span>`;
                    }

                    if (defenseFooter) {
                        defenseFooter.innerHTML = `${data.completedProjects} <span style="color: #919EAB;">completed</span>`;
                    }
                }
            });

        } catch (error) {
            console.error("Error fetching proposal data:", error);
        }
    }
</script>

<!-- ------------- For Poster Evaluation Card --------------- -->
<script>
    async function fetchPosterData() {
        const program = document.querySelector(".tab.active");
        const selectedYear = document.getElementById("semester-selector").value;

        try {
            const response = await fetch(`http://localhost:8080/api/poster-evaluation?program=${program.textContent}&year=${selectedYear}`);

            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }

            const data = await response.json();
            console.log("Fetch Defense Data:", data);

            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö
            if (!data || typeof data.totalProjects === "undefined" || typeof data.completedProjects === "undefined") {
                throw new Error("Invalid data format");
            }

            // ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ .header-container ‡∏ó‡∏µ‡πà‡∏°‡∏µ .text-header ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° 'Proposal Evaluation'
            const headerContainers = document.querySelectorAll(".header-container");
            headerContainers.forEach(container => {
                const headerText = container.querySelector(".text-header");
                console.log("headerText: "+headerText.textContent)
                if (headerText && headerText.textContent.includes("Poster Evaluation")) {
                    console.log("update poster card")
                    const posterHeader = container.querySelector(".text-center h1");
                    const posterFooter = container.querySelector(".text-footer");

                    if (posterHeader) {
                        posterHeader.innerHTML = `${data.completedProjects}/${data.totalProjects} <span style="color: #919EAB;">Groups</span>`;
                    }

                    if (posterFooter) {
                        posterFooter.innerHTML = `${data.completedProjects} <span style="color: #919EAB;">completed</span>`;
                    }
                }
            });

        } catch (error) {
            console.error("Error fetching proposal data:", error);
        }
    }
</script>

<!-- ---------- For Grade Bar Chart -------------- -->
<script>
    // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô fetchGradeDistribution ‡πÉ‡∏´‡πâ‡∏£‡∏±‡∏ö‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏à‡∏≤‡∏Å‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡πà‡∏≤‡∏á‡πÜ
    function fetchGradeDistribution() {
        // ‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡πà‡∏≤‡∏à‡∏≤‡∏Å UI elements ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
        const semesterYear = document.getElementById("semester-selector").value;

        // ‡∏´‡∏≤ tab ‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏•‡∏±‡∏á active ‡∏≠‡∏¢‡∏π‡πà (All, ICT, DST)
        const activeTab = document.querySelector(".tab.active").textContent;

        // ‡∏´‡∏≤ filter ‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏•‡∏±‡∏á active ‡∏≠‡∏¢‡∏π‡πà (Proposal, Poster, Defense)
        const activeFilter = document.querySelector(".filter.active").textContent;

        // Map filter text ‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤ evaType ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡πÑ‡∏õ API
        let evaType;
        switch (activeFilter) {
            case "Proposal":
                evaType = "Proposal Evaluation";
                break;
            case "Poster":
                evaType = "Poster Exhibition";
                break;
            case "Defense":
                evaType = "Defense Evaluation";
                break;
            default:
                evaType = "Proposal Evaluation";
        }

        console.log(`Fetching data for: ${activeTab} program, ${semesterYear} year, ${evaType}`);

        // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å API ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå
        fetch(`http://localhost:8080/api/grading-graph?program=${activeTab}&year=${semesterYear}&evaType=${evaType}`)
            .then(response => response.json())
            .then(data => {
                updateChart(data, evaType);
            })
            .catch(error => {
                console.error("Error fetching grade distribution:", error);
            });
    }

    function updateChart(gradeData, evaType) {
        const barChart = document.getElementById("barChart");
        const tooltip = document.getElementById("tooltip");
        barChart.innerHTML = ""; // ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏Å‡∏£‡∏≤‡∏ü‡πÄ‡∏Å‡πà‡∏≤

        if (evaType === "Poster Exhibition") {
            barChart.innerHTML = `<div style=" position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 16px; color: #ff0000; text-align: center;">
            Poster Exhibition ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡πÄ‡∏Å‡∏£‡∏î
        </div>`;
            return; // ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏£‡∏≤‡∏ü
        }

        console.log("grade data: ", gradeData)

        const gradeOrder = ["A", "B+", "B", "C+", "C", "D+", "D", "F", "I"];
        const maxCount = Math.max(...Object.values(gradeData), 1);

        let xAxis = document.querySelector(".x-axis");
        if (!xAxis) {
            xAxis = document.createElement("div");
            xAxis.classList.add("x-axis");
            barChart.parentNode.insertBefore(xAxis, barChart.nextSibling);
        }
        xAxis.innerHTML = "";

        gradeOrder.forEach(grade => {
            const count = gradeData[grade] || 0;
            const heightPercent = (count / maxCount) * 100;

            const bar = document.createElement("div");
            bar.classList.add("bar");
            bar.style.height = heightPercent + "%";
            bar.setAttribute("data-grade", grade);
            bar.setAttribute("data-count", count);

            // Mouse Hover Tooltip
            bar.addEventListener("mouseenter", (event) => {
                tooltip.innerText = `‡πÄ‡∏Å‡∏£‡∏î ${grade}: ${count} ‡∏Ñ‡∏ô`;
                tooltip.style.display = "block";
                tooltip.style.left = event.pageX + "px";
                tooltip.style.top = (event.pageY - 30) + "px";
            });

            bar.addEventListener("mousemove", (event) => {
                tooltip.style.left = event.pageX + "px";
                tooltip.style.top = (event.pageY - 30) + "px";
            });

            bar.addEventListener("mouseleave", () => {
                tooltip.style.display = "none";
            });

            barChart.appendChild(bar);

            // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡πâ‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡∏£‡∏î x-axis
            const xLabel = document.createElement("div");
            xLabel.classList.add("x-label");
            xLabel.textContent = grade;
            xAxis.appendChild(xLabel);
        });
    }
</script>

<!-- ---------- For Reminder Card ----------- -->
<script>
    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï timeline
    function fetchImportantDates() {
        fetch("http://localhost:8080/api/important-dates")
            .then(response => {
                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }
                return response.json();
            })
            .then(data => {
                updateTimeline(data);
            })
            .catch(error => {
                console.error("Error fetching important dates:", error);
            });
    }

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï UI ‡∏Ç‡∏≠‡∏á timeline
    function updateTimeline(scoringPeriods) {
        const timelineContainer = document.querySelector(".timeline");
        timelineContainer.innerHTML = ""; // ‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πà‡∏≤

        // Map evaluation types ‡∏Å‡∏±‡∏ö‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏µ‡πà‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•
        const displayNames = {
            "Proposal Evaluation": "Proposal Presentation",
            "Poster Evaluation": "Poster Exhibition",
            "Defense Evaluation": "Senior Project Defense",
            "Proposal Grade": "Proposal Grading Period"
        };

        const today = new Date();

        // ‡∏Å‡∏£‡∏≠‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 7 ‡∏ß‡∏±‡∏ô
        const filteredPeriods = scoringPeriods.filter(period => {
            const endDate = new Date(period.endDate);
            const daysPast = Math.ceil((today - endDate) / (1000 * 60 * 60 * 24));
            return daysPast <= 7; // ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ó‡∏µ‡πà‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 7 ‡∏ß‡∏±‡∏ô
        });

        // ‡∏™‡∏£‡πâ‡∏≤‡∏á timeline items
        filteredPeriods.forEach(period => {
            const endDate = new Date(period.endDate);
            const daysRemaining = Math.max(0, Math.ceil((endDate - today) / (1000 * 60 * 60 * 24)));

            // Format dates
            const startDateFormatted = formatDate(period.startDate);
            const endDateFormatted = formatDate(period.endDate);

            // ‡∏™‡∏£‡πâ‡∏≤‡∏á timeline item
            const timelineItem = document.createElement("div");
            timelineItem.classList.add("timeline-item");

            // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏™‡∏µ‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ï‡∏≤‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠
            let statusClass = "";
            if (daysRemaining === 0) {
                statusClass = "timeline-expired";
            } else if (daysRemaining <= 7) {
                statusClass = "timeline-urgent";
            } else if (daysRemaining >= 30) {
                statusClass = "timeline-chill";
            }

            if (statusClass) {
                timelineItem.classList.add(statusClass);
            }

            timelineItem.innerHTML = `
            <div class="timeline-icon">üïí</div>
            <div class="timeline-content">
                <div class="timeline-title">${displayNames[period.evaluationType] || period.evaluationType}</div>
                <div class="timeline-date">‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤ : ${startDateFormatted} - ${endDateFormatted}</div>
                <div class="timeline-status">‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏ß‡∏•‡∏≤ : ${daysRemaining} ‡∏ß‡∏±‡∏ô</div>
            </div>
        `;

            timelineContainer.appendChild(timelineItem);
        });
    }


    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà
    function formatDate(dateString) {
        const date = new Date(dateString);
        const year = date.getFullYear();
        const month = String(date.getMonth() + 1).padStart(2, '0');
        const day = String(date.getDate()).padStart(2, '0');
        return `${year}/${month}/${day}`;
    }

    // ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤
    document.addEventListener("DOMContentLoaded", function() {
        fetchImportantDates();

        // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏∏‡∏Å 24 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á
        setInterval(fetchImportantDates, 24 * 60 * 60 * 1000);
    });
</script>

<!-- ----------- For Pie Chart ------------- -->
<script>
    async function fetchEvaluationStatus() {
        try {
            const activeFilter = document.querySelector('.filter.active').textContent.trim();
            const activeProgram = document.querySelector('.tab.active').textContent.trim();
            const selectedYear = document.getElementById('semester-selector').value;

            let evaType = activeFilter === 'Proposal' ? 'Proposal' :
                activeFilter === 'Poster' ? 'Poster' :
                    'Defense';

            const response = await fetch(`/api/student-counts?evaType=${evaType}&year=${selectedYear}&program=${activeProgram}`);

            if (!response.ok) {
                throw new Error(`HTTP error! Status: ${response.status}`);
            }

            const data = await response.json();
            console.log("üìä Student Count Data:", data);

            updatePieChart(data);

        } catch (error) {
            console.error("‚ùå Error fetching evaluation status:", error);
        }
    }

    function updatePieChart(data) {
        // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ú‡∏•‡∏£‡∏ß‡∏°‡∏Ç‡∏≠‡∏á‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
        const total = data.completed + data.partial + data.notEvaluated;

        // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
        const completedPercentage = total > 0 ? (data.completed / total) * 100 : 0;
        const partialPercentage = total > 0 ? (data.partial / total) * 100 : 0;
        const notEvaluatedPercentage = total > 0 ? (data.notEvaluated / total) * 100 : 0;

        // ‡∏´‡∏≤‡∏≠‡∏á‡∏®‡∏≤‡∏ó‡∏µ‡πà‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏™‡πà‡∏ß‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏™‡∏î‡∏á
        const completedAngle = completedPercentage * 3.6; // 360 / 100 = 3.6
        const partialAngle = partialPercentage * 3.6;
        const notEvaluatedAngle = notEvaluatedPercentage * 3.6;

        // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï pie chart ‡∏î‡πâ‡∏ß‡∏¢ conic-gradient (‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö pie chart)
        const pieChart = document.querySelector('.pie-chart');

        // ‡∏™‡∏£‡πâ‡∏≤‡∏á conic-gradient ‡∏ï‡∏≤‡∏°‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÑ‡∏î‡πâ
        let gradientStr = "";

        if (completedPercentage > 0) {
            gradientStr += `#26a69a 0deg ${completedAngle}deg`;
        }

        if (partialPercentage > 0) {
            gradientStr += `${gradientStr ? ", " : ""}#feca57 ${completedAngle}deg ${completedAngle + partialAngle}deg`;
        }

        if (notEvaluatedPercentage > 0) {
            gradientStr += `${gradientStr ? ", " : ""}#ff6b6b ${completedAngle + partialAngle}deg ${completedAngle + partialAngle + notEvaluatedAngle}deg`;
        }

        if (gradientStr === "") {
            gradientStr = "#f5f5f5 0deg 360deg"; // ‡∏Å‡∏£‡∏ì‡∏µ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
        }

        pieChart.style.background = `conic-gradient(${gradientStr})`;

        // ‡∏•‡∏ö elements ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏≠‡∏Å
        const percentageElements = pieChart.querySelectorAll('.percentage');
        percentageElements.forEach(el => el.remove());

        // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏ô‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏™‡∏î‡∏á‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
        const legendItems = document.querySelectorAll('.legend-item');
        legendItems[0].querySelector('div:last-child').textContent =
            `‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Ñ‡∏£‡∏ö‡πÅ‡∏•‡πâ‡∏ß (${data.completed} ‡∏Ñ‡∏ô, ${completedPercentage.toFixed(1)}%)`;
        legendItems[1].querySelector('div:last-child').textContent =
            `‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏ö‡∏≤‡∏á‡∏™‡πà‡∏ß‡∏ô (${data.partial} ‡∏Ñ‡∏ô, ${partialPercentage.toFixed(1)}%)`;
        legendItems[2].querySelector('div:last-child').textContent =
            `‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô (${data.notEvaluated} ‡∏Ñ‡∏ô, ${notEvaluatedPercentage.toFixed(1)}%)`;
    }
</script>

<!-- Instructor scoring-->
<script>
    // async function fetchTeacherScoringData() {
    //     try {
    //         const activeFilter = document.querySelector('.filter.active').textContent.trim();
    //         const activeProgram = document.querySelector('.tab.active').textContent.trim();
    //         const selectedYear = document.getElementById('semester-selector').value;
    //
    //         let evaType = activeFilter === 'Proposal' ? 'Proposal' :
    //             activeFilter === 'Poster' ? 'Poster' :
    //                 'Defense';
    //
    //         console.log("üòà Scoring");
    //         console.log("üòà", evaType, selectedYear, activeProgram);
    //
    //         const response = await fetch(`http://localhost:8080/api/teacher-scoring/remaining?evaType=${evaType}&year=${selectedYear}&program=${activeProgram}`);
    //         if (!response.ok) {
    //             throw new Error(`HTTP error! Status: ${response.status}`);
    //         }
    //
    //         const data = await response.json();
    //
    //         // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å API
    //         console.log("üòà", data);
    //
    //         // ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡∏Å‡∏£‡∏≤‡∏ü
    //         const container = document.getElementById('teacher-scoring-container');
    //         container.innerHTML = ''; // ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏Å‡∏£‡∏≤‡∏ü‡πÄ‡∏î‡∏¥‡∏°‡∏Å‡πà‡∏≠‡∏ô
    //
    //         // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡∏°‡πà‡∏à‡∏≤‡∏Å API
    //         data.forEach(item => {
    //             const barItem = document.createElement('div');
    //             barItem.classList.add('h-bar-item');
    //
    //             const label = document.createElement('div');
    //             label.classList.add('h-bar-label');
    //             label.textContent = item.instructorName;
    //
    //             const barContainer = document.createElement('div');
    //             barContainer.classList.add('h-bar-container');
    //
    //             const barFill = document.createElement('div');
    //             barFill.classList.add('h-bar-fill');
    //
    //             // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏à‡∏≤‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏≠‡∏ö‡∏´‡∏°‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÄ‡∏™‡∏£‡πá‡∏à
    //             const percentage = ((item.remainingCount / item.totalAssigned) * 100);
    //
    //             barFill.style.width = `${percentage}%`;  // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß‡∏ï‡∏≤‡∏°‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠
    //             // barFill.style.backgroundColor = getColorForPercentage(item.remainingCount);
    //
    //             const percentageText = document.createElement('div');
    //             percentageText.classList.add('h-bar-percentage');
    //             percentageText.textContent = `${item.remainingCount} ‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠`;
    //
    //             // ‡∏£‡∏ß‡∏°‡∏ó‡∏∏‡∏Å‡∏™‡πà‡∏ß‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô
    //             barContainer.appendChild(barFill);
    //             barItem.appendChild(label);
    //             barItem.appendChild(barContainer);
    //             barItem.appendChild(percentageText);
    //
    //             container.appendChild(barItem);
    //         });
    //     } catch (error) {
    //         console.error("Error fetching teacher scoring data:", error);
    //     }
    // }

    async function fetchTeacherScoringData() {
        try {
            const activeFilter = document.querySelector('.filter.active').textContent.trim();
            const activeProgram = document.querySelector('.tab.active').textContent.trim();
            const selectedYear = document.getElementById('semester-selector').value;

            let evaType = activeFilter === 'Proposal' ? 'Proposal' :
                activeFilter === 'Poster' ? 'Poster' :
                    'Defense';

            console.log("üòà Scoring");
            console.log("üòà", evaType, selectedYear, activeProgram);

            const response = await fetch(`http://localhost:8080/api/teacher-scoring/remaining?evaType=${evaType}&year=${selectedYear}&program=${activeProgram}`);
            if (!response.ok) {
                throw new Error(`HTTP error! Status: ${response.status}`);
            }

            const data = await response.json();

            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å API
            console.log("üòà", data);

            // ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡∏Å‡∏£‡∏≤‡∏ü
            const container = document.getElementById('teacher-scoring-container');
            container.innerHTML = ''; // ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏Å‡∏£‡∏≤‡∏ü‡πÄ‡∏î‡∏¥‡∏°‡∏Å‡πà‡∏≠‡∏ô

            // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡∏°‡πà‡∏à‡∏≤‡∏Å API
            data.forEach(item => {
                const barItem = document.createElement('div');
                barItem.classList.add('h-bar-item');

                const label = document.createElement('div');
                label.classList.add('h-bar-label');
                label.textContent = item.instructorName;

                const barContainer = document.createElement('div');
                barContainer.classList.add('h-bar-container');

                const barFill = document.createElement('div');
                barFill.classList.add('h-bar-fill');

                // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏à‡∏≤‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏≠‡∏ö‡∏´‡∏°‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÄ‡∏™‡∏£‡πá‡∏à
                const percentage = ((item.remainingCount / item.totalAssigned) * 100);
                barFill.style.width = `${100 - percentage}%`;  // ‡∏ñ‡πâ‡∏≤‡∏´‡∏≤‡∏Å percentage ‡∏Ñ‡∏∑‡∏≠ 100% ‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏ó‡∏≤ ‡∏ñ‡πâ‡∏≤ 0% ‡∏Ñ‡∏∑‡∏≠‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß

                // ‡∏ï‡∏±‡πâ‡∏á‡∏™‡∏µ‡∏Ç‡∏≠‡∏á‡πÅ‡∏ó‡πà‡∏á‡∏ï‡∏≤‡∏°‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå
                barFill.style.backgroundColor = getColorForPercentage(percentage);

                const percentageText = document.createElement('div');
                percentageText.classList.add('h-bar-percentage');
                percentageText.textContent = `${item.remainingCount} ‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠`;

                // ‡∏£‡∏ß‡∏°‡∏ó‡∏∏‡∏Å‡∏™‡πà‡∏ß‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô
                barContainer.appendChild(barFill);
                barItem.appendChild(label);
                barItem.appendChild(barContainer);
                barItem.appendChild(percentageText);

                container.appendChild(barItem);
            });
        } catch (error) {
            console.error("Error fetching teacher scoring data:", error);
        }
    }

    function getColorForPercentage(percentage) {
        // ‡∏ñ‡πâ‡∏≤‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏Ñ‡∏∑‡∏≠ 100% (‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡πÄ‡∏•‡∏¢) ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏™‡∏µ‡πÅ‡∏î‡∏á
        if (percentage === 100) {
            return '#ff8080'; // ‡∏™‡∏µ‡πÅ‡∏î‡∏á
        }
        // ‡∏ñ‡πâ‡∏≤‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏Ñ‡∏∑‡∏≠ 0% (‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß) ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß
        return '#20c8ba'; // ‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß
    }


</script>


</body>