<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proposal Evaluation Project</title>

    <!-- CSS -->
    <link rel="stylesheet" href="/css/sidebar-instructor.css">
    <link rel="stylesheet" href="/css/ShowProject.css">

    <!-- Library -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">


</head>

<body>
<div class="container">
    <div class="sidebar">
        <h2>ICT MAHIDOL</h2>
        <ul>
            <h4><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 48 48"
                     style="fill:#FFFFFF;">
                <path
                        d="M39.5,43h-9c-1.381,0-2.5-1.119-2.5-2.5v-9c0-1.105-0.895-2-2-2h-4c-1.105,0-2,0.895-2,2v9c0,1.381-1.119,2.5-2.5,2.5h-9	C7.119,43,6,41.881,6,40.5V21.413c0-2.299,1.054-4.471,2.859-5.893L23.071,4.321c0.545-0.428,1.313-0.428,1.857,0L39.142,15.52	C40.947,16.942,42,19.113,42,21.411V40.5C42,41.881,40.881,43,39.5,43z">
                </path>
            </svg> Homepage </h4>
            <li><a href="/instructor/view">Dashboard</a></li>
        </ul>

        <ul>
            <h4><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0,0,256,256">
                <g fill="#ffffff" fill-rule="nonzero">
                    <g transform="scale(5.33333,5.33333)">
                        <path
                                d="M12.5,4c-2.481,0 -4.5,2.019 -4.5,4.5v31c0,2.481 2.019,4.5 4.5,4.5h23c2.481,0 4.5,-2.019 4.5,-4.5v-19.5h-11.5c-2.481,0 -4.5,-2.019 -4.5,-4.5v-11.5zM27,4.87891v10.62109c0,0.827 0.673,1.5 1.5,1.5h10.62109zM17.5,25h13c0.828,0 1.5,0.672 1.5,1.5c0,0.828 -0.672,1.5 -1.5,1.5h-13c-0.828,0 -1.5,-0.672 -1.5,-1.5c0,-0.828 0.672,-1.5 1.5,-1.5zM17.49023,32h8.99609c0.828,0 1.5,0.671 1.5,1.5c0.001,0.759 -0.56292,1.38733 -1.29492,1.48633l-0.20312,0.01367h-8.99609c-0.828,0 -1.5,-0.672 -1.5,-1.5c0,-0.759 0.56292,-1.38733 1.29492,-1.48633z">
                        </path>
                    </g>
                </g>
            </svg> Evaluation (40%) </h4>
            <li><a href="/show-proposal-eva-projects">Proposal Evaluation</a></li>
            <li><a href="/show-poster-projects">Poster Evaluation</a></li>
            <li><a href="/show-defense-eva-projects">Defense Evaluation</a></li>
        </ul>

        <ul>
            <h4><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0,0,256,256">
                <g fill="#ffffff" fill-rule="nonzero">
                    <g transform="scale(5.33333,5.33333)">
                        <path
                                d="M12.5,4c-2.481,0 -4.5,2.019 -4.5,4.5v31c0,2.481 2.019,4.5 4.5,4.5h23c2.481,0 4.5,-2.019 4.5,-4.5v-19.5h-11.5c-2.481,0 -4.5,-2.019 -4.5,-4.5v-11.5zM27,4.87891v10.62109c0,0.827 0.673,1.5 1.5,1.5h10.62109zM17.5,25h13c0.828,0 1.5,0.672 1.5,1.5c0,0.828 -0.672,1.5 -1.5,1.5h-13c-0.828,0 -1.5,-0.672 -1.5,-1.5c0,-0.828 0.672,-1.5 1.5,-1.5zM17.49023,32h8.99609c0.828,0 1.5,0.671 1.5,1.5c0.001,0.759 -0.56292,1.38733 -1.29492,1.48633l-0.20312,0.01367h-8.99609c-0.828,0 -1.5,-0.672 -1.5,-1.5c0,-0.759 0.56292,-1.38733 1.29492,-1.48633z">
                        </path>
                    </g>
                </g>
            </svg> Grades (60%) </h4>
            <li><a href="/show-proposal-grade-projects">Proposal Grade</a></li>
            <li><a href="/show-defense-grade-projects">Defense Grade</a></li>
        </ul>
    </div>

    <div class="content">

        <div class="header-section">
            Proposal Evaluation (40%)
        </div>

        <div class="table-container">
            <h1>Projects</h1>
            <div class="filter-controls">
                <label id="program-select"><strong>Program:</strong>
                    <select id="program-select-box" name="program">
                        <option value="all" selected>ALL</option>
                        <option value="ict">ICT</option>
                        <option value="dst">DST</option>
                    </select>
                </label>
                <label id="role-select"><strong>Role:</strong>
                    <select id="role-select-box" name="role">
                        <option value="all" selected>ALL</option>
                        <option value="advisor">Advisor</option>
                        <option value="committee">Committee</option>
                    </select>
                </label>
                <input id="search-keyword" type="text" placeholder="Search" />
            </div>

            <table id="result-table">
                <thead>
                <tr>
                    <th>Project ID</th>
                    <th>Project Name</th>
                    <th>Role</th>
                    <th>Student ID</th>
                    <th>Student Names</th>
                    <th>Evaluation</th>
                    <th>Actions</th>
                </tr>
                </thead>
                <tbody id="filter-results">
                <!-- Record Result -->

                </tbody>
            </table>
        </div>

    </div>

</div>
</body>

</html>

<script>

    function fetchData() {
        // JSON information fetch project list
        let url = 'http://localhost:8080/instructor/projectList';

        // ‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠‡πÑ‡∏õ‡∏¢‡∏±‡∏á API ‡∏´‡∏£‡∏∑‡∏≠ Backend
        fetch(url)
            .then(response => {
                // console.log(response.json());
                if (!response.ok) {
                    throw new Error('Network response was not ok ' + response.statusText);
                }
                return response.json();
            })
            .then(data => {
                console.log("üêç Data Length: " + data.length);
                console.log("Show Data: " + JSON.stringify(data, null, 2));
                // ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö
                displayResults(data);
            })
            .catch(error => {
                console.error('Error fetching data:', error);
                document.getElementById('filter-results').innerHTML = "‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•";
            });
    }

    document.addEventListener('DOMContentLoaded', function () {
        fetchData();
        // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ event listeners ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ü‡∏¥‡∏•‡∏î‡πå‡∏ü‡∏¥‡∏•‡πÄ‡∏ï‡∏≠‡∏£‡πå ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á
        document.getElementById('program-select-box').addEventListener('change', debounce(applyFilters, 100));
        document.getElementById('role-select-box').addEventListener('change', debounce(applyFilters, 100));
        // document.getElementById('search-keyword').addEventListener('input', debounce(applyFilters, 100));
    });

    function debounce(func, delay) {
        let timeout;
        return function (...args) {
            // ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå timeout ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏î‡∏¥‡∏°‡∏Å‡πà‡∏≠‡∏ô ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô
            clearTimeout(timeout);

            // ‡∏ï‡∏±‡πâ‡∏á timeout ‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏î‡∏µ‡πÄ‡∏•‡∏¢‡πå‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î
            timeout = setTimeout(() => func.apply(this, args), delay);
        };
    }

    // ------ Script for filter function ------- //
    function applyFilters() {
        const programFilter = document.getElementById('program-select-box')?.value;
        const roleFilter = document.getElementById('role-select-box')?.value;

        const rows = document.querySelectorAll("#filter-results tr");
        console.log(programFilter)
        console.log(roleFilter)

        rows.forEach(row => {
            const programCell = row.querySelector('.tag');
            const roleCell = row.querySelector('.role');

            let matches = true;

            // ‡∏Å‡∏£‡∏≠‡∏á Program: ‡∏ñ‡πâ‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å "All" ‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏Å‡∏£‡∏≠‡∏á
            if (matches && programFilter !== 'all' && programCell) {
                matches = programCell.classList.contains(programFilter);
                console.log("Filtered Program : " + programFilter)
            }

            // ‡∏Å‡∏£‡∏≠‡∏á Role: ‡∏ñ‡πâ‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å "All" ‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏Å‡∏£‡∏≠‡∏á
            if (matches && roleFilter !== 'all' && roleCell) {
                matches = roleCell.classList.contains(roleFilter);
                console.log("Filtered Role : " + roleFilter)
            }

            // ‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏ã‡πà‡∏≠‡∏ô‡πÅ‡∏ñ‡∏ß
            row.style.display = matches ? '' : 'none';
        });
    }

    // // ------ Script for filter function ------- //
    // function applyFilters() {
    //
    //     // ‡∏î‡∏∂‡∏á‡∏Ñ‡πà‡∏≤‡∏à‡∏≤‡∏Å‡∏ü‡∏¥‡∏•‡∏î‡πå‡∏ü‡∏¥‡∏•‡πÄ‡∏ï‡∏≠‡∏£‡πå
    //     const program = document.getElementById('program-select-box').value;
    //     const role = document.getElementById('role-select-box').value;
    //
    //     // ‡∏™‡∏£‡πâ‡∏≤‡∏á URL ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏õ‡∏¢‡∏±‡∏á API ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏Å‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
    //     let url = `http://localhost:8080/api/filter?program=${program}&role=${role}`;
    //         // http://localhost:8080/api/filter?program=${program}&role=${role}
    //     // http://localhost:8080/instructor/projectList?projectProgram=${program}&role=${role}
    //
    //     fetch(url)
    //         .then(response => {
    //             if (!response.ok) {
    //                 throw new Error('Network response was not ok ' + response.statusText);
    //             }
    //             return response.json();
    //         })
    //         .then(data => {
    //             console.log(data);
    //
    //             // ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤ data ‡πÄ‡∏õ‡πá‡∏ô Array ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
    //             if (Array.isArray(data)) {
    //                 displayResults(data); // ‡∏´‡∏≤‡∏Å‡πÄ‡∏õ‡πá‡∏ô Array ‡πÉ‡∏´‡πâ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•
    //             } else if (data && data.studentName) {
    //                 // ‡∏´‡∏≤‡∏Å‡πÄ‡∏õ‡πá‡∏ô Object ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß ‡πÉ‡∏´‡πâ‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô Array ‡∏Å‡πà‡∏≠‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•
    //                 displayResults([data]);
    //             } else {
    //                 // ‡∏ñ‡πâ‡∏≤ data ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà Array ‡∏´‡∏£‡∏∑‡∏≠ Object ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£
    //                 console.error("Expected an array or object, but received:", data);
    //                 document.getElementById('filter-results').innerHTML = "No data found.";
    //             }
    //         })
    //         .catch(error => {
    //             console.error("Error fetching data:", error);
    //             document.getElementById('filter-results').innerHTML = "An error occurred while fetching data.";
    //         });
    // }

    // ------ Script for search function ------- //
    document.getElementById('search-keyword').addEventListener('input', function () {
        const searchTerm = this.value.toLowerCase();

        // ‡∏î‡∏∂‡∏á‡∏ó‡∏∏‡∏Å‡πÅ‡∏ñ‡∏ß‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏°‡∏≤
        const rows = document.querySelectorAll("#filter-results tr");
        rows.forEach(row => {
            const cells = row.querySelectorAll('td');

            // ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ check ‡∏ß‡πà‡∏≤ row ‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏Ñ‡∏≥‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏°‡∏±‡πâ‡∏¢
            let rowMatches = false;

            // ‡∏ß‡∏ô‡∏•‡∏π‡∏õ‡∏ú‡πà‡∏≤‡∏ô‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡πÉ‡∏ô‡πÅ‡∏ñ‡∏ß
            cells.forEach(cell => {
                if (cell.textContent.toLowerCase().includes(searchTerm)) {
                    rowMatches = true;
                }
            });

            // ‡∏ñ‡πâ‡∏≤‡πÅ‡∏ñ‡∏ß‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏Ñ‡∏≥‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Å‡πá‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡πÅ‡∏ñ‡∏ß‡∏ô‡∏±‡πâ‡∏ô
            if (rowMatches) {
                row.style.display = '';
            } else {
                row.style.display = 'none';
            }
        });
    });

    function displayResults(data) {
        let tableBody = document.querySelector("tbody");
        tableBody.innerHTML = "";  // ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πà‡∏≤

        // if (Array.isArray(data)) {
        //     // ‡∏™‡∏£‡πâ‡∏≤‡∏á object ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏°‡∏µ projectId ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô
        //     let groupedData = {};
        //     data.forEach(item => {
        //         // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô groupedData ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö projectId ‡∏ô‡∏µ‡πâ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
        //         console.log(item);
        //         if (!groupedData[item.projectId]) {
        //             // ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á projectId ‡∏ô‡∏µ‡πâ‡πÉ‡∏ô groupedData ‡πÉ‡∏´‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà
        //             groupedData[item.projectId] = {
        //                 program: item.projectProgram,
        //                 projectId: item.projectId,
        //                 projectTitle: item.projectTitle,
        //                 role: item.role,
        //                 studentIds: [],
        //                 studentNames: []
        //             };
        //         }
        //
        //         // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ studentId ‡∏´‡∏£‡∏∑‡∏≠ studentName ‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
        //         if (!groupedData[item.projectId].studentIds.includes(item.studentId)) {
        //             // ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ studentId ‡∏ô‡∏µ‡πâ‡πÉ‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏° ‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏á‡πÑ‡∏õ
        //             groupedData[item.projectId].studentIds.push(item.studentId);
        //         }
        //         if (!groupedData[item.projectId].studentNames.includes(item.studentName)) {
        //             // ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ studentName ‡∏ô‡∏µ‡πâ‡πÉ‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏° ‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏á‡πÑ‡∏õ
        //             groupedData[item.projectId].studentNames.push(item.studentName);
        //         }
        //     });
        //
        //     // ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏à‡∏±‡∏î‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÅ‡∏•‡πâ‡∏ß
        //     for (let projectId in groupedData) {
        //         let item = groupedData[projectId];
        //         let row = document.createElement("tr");
        //
        //         // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ studentIds ‡πÅ‡∏•‡∏∞ studentNames ‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏≤‡∏£‡πå‡πÄ‡∏£‡∏¢‡πå‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà ‡∏Å‡πà‡∏≠‡∏ô‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô .map()
        //         const studentIdsList = Array.isArray(item.studentIds) ? item.studentIds : [item.studentIds];
        //         const studentNamesList = Array.isArray(item.studentNames) ? item.studentNames : [item.studentNames];
        //
        //     //     // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÄ‡∏ã‡∏•‡∏•‡πå‡πÉ‡∏ô‡πÅ‡∏ñ‡∏ß
        //         row.innerHTML = `
        //         <td><span class="tag ${item.program.toLowerCase()}">${item.program}</span> ${item.projectId}</td>
        //         <td>${item.projectTitle}</td>
        //         <td><span class="role ${item.role.toLowerCase()}">${item.role}</span></td>
        //         <td>
        //             <ul>
        //                 ${studentIdsList.map(id => `<li>${id}</li>`).join('')}
        //             </ul>
        //         </td>
        //         <td>
        //             <ul>
        //                 ${studentNamesList.map(name => `<li>${name}</li>`).join('')}
        //             </ul>
        //         </td>
        //         <td class="evaluation completed"><span class="material-icons">done</span></td>
        //         <td class="actions"><span class="material-icons" @onClick="editAction">edit</span></td>
        //     `;
        //
        //         tableBody.appendChild(row);  // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÅ‡∏ñ‡∏ß‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á
        //     }
        // } else {
        //     console.error("Data is not an array:", data);
        //     document.getElementById('filter-results').innerHTML = "No valid data to display.";
        // }

        try {
            data.forEach(project => {
                console.log("Process project: "+ project);

                const row = document.createElement('tr');

                // status
                const evaluationStatus = project.allEvaluationsComplete
                ? `<td class="evaluation completed" title="Complete Evaluation"><i class="fa-solid fa-check"></i></td>`
                : `<td class="evaluation uncompleted" title="Incomplete Evaluation"><i class="fa-solid fa-spinner"></i></td>`;

                row.innerHTML = `
                 <td><span class="tag ${project.projectProgram.toLowerCase()}">${project.projectProgram}</span> ${project.projectId}</td>
                <td>${project.projectTitle}</td>
                <td><span class="role ${project.role.toLowerCase()}">${project.role}</span></td>
                <td>
                    <ul>
                        ${project.students.map(id => `<li>${id.studentId}</li>`).join('')}
                    </ul>
                </td>
                <td>
                    <ul>
                        ${project.students.map(name => `<li>${name.studentName}</li>`).join('')}
                    </ul>
                </td>
<!--                <td class="evaluation completed"><i class="fa-solid fa-check"></i></td>-->
                ${evaluationStatus}
                <td>
                    <form action="/instructor/editProposalEvaluation" method="get">
                        <input type="hidden" name="projectId" value="${project.projectId}">
                        <button type="submit"><span class="material-icons">edit</span></button>
                    </form>
                </td>
                `;
                tableBody.appendChild(row);
            })
        } catch (error) {
            console.error("Error display data in html: "+ error);
            document.getElementById('filter-results').innerHTML = "No valid data to display.";
        }
    }

</script>


